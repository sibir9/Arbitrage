<!DOCTYPE html>  
<html lang="ru">  
<head>  
  <meta charset="UTF-8" />  
  <title>Актуальная цена NAKA</title>  
  <style>  
    body {  
      font-family: Arial, sans-serif;  
      margin: 40px;  
      text-align: center;  
      background-color: #f9f9f9;  
    }  
    h1 {  
      color: #333;  
    }  
    .price-container {  
      margin: 20px auto;  
      width: 320px;  
      background: #fff;  
      padding: 20px;  
      border-radius: 10px;  
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);  
    }  
    .price-label {  
      font-size: 1.2em;  
      color: #555;  
      margin-bottom: 8px;  
    }  
    .price-value {  
      font-size: 2em;  
      font-weight: bold;  
      color: #1a73e8;  
      min-height: 40px;  
    }  
    .error {  
      color: #d9534f;  
      font-weight: normal;  
    }  
  </style>  
</head>  
<body>  
  <h1>Актуальная цена токена NAKA</h1>  
  
  <div class="price-container">  
    <div class="price-label">MEXC (NAKA/USDT):</div>  
    <div id="price-mexc" class="price-value">Загрузка...</div>  
  </div>  
  
  <div class="price-container">  
    <div class="price-label">QuickSwap (NAKA/USDT):</div>  
    <div id="price-quickswap" class="price-value">Загрузка...</div>  
  </div>  
  
  <script>  
    // Функция для обновления цен с сервера  
    async function updatePrices() {  
      try {  
        // Выполняем запрос по API /price  
        const response = await fetch('/price');  
  
        if (!response.ok) {  
          throw new Error(`HTTP ошибка! Статус: ${response.status}`);  
        }  
  
        const data = await response.json();  
  
        // Обновляем цену с MEXC  
        if (data.mexc !== undefined && data.mexc !== null && data.mexc !== 'Ошибка') {  
          document.getElementById('price-mexc').innerText = Number(data.mexc).toFixed(6);  
          document.getElementById('price-mexc').classList.remove('error');  
        } else {  
          document.getElementById('price-mexc').innerText = 'Ошибка загрузки';  
          document.getElementById('price-mexc').classList.add('error');  
        }  
  
        // Обновляем цену с QuickSwap  
        if (data.quickswap !== undefined && data.quickswap !== null && data.quickswap !== 'Ошибка') {  
          document.getElementById('price-quickswap').innerText = Number(data.quickswap).toFixed(6);  
          document.getElementById('price-quickswap').classList.remove('error');  
        } else {  
          document.getElementById('price-quickswap').innerText = 'Ошибка загрузки';  
          document.getElementById('price-quickswap').classList.add('error');  
        }  
      } catch (error) {  
        // В случае сетевой ошибки выводим уведомление  
        document.getElementById('price-mexc').innerText = 'Сетевая ошибка';  
        document.getElementById('price-mexc').classList.add('error');  
        document.getElementById('price-quickswap').innerText = 'Сетевая ошибка';  
        document.getElementById('price-quickswap').classList.add('error');  
        console.error('Ошибка при загрузке цен:', error);  
      }  
    }  
  
    // Запускаем обновление сразу при загрузке страницы  
    updatePrices();  
  
    // Повторяем обновление каждые 5 секунд  
    setInterval(updatePrices, 5000);  
  </script>  
</body>  
</html>  

